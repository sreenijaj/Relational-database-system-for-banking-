create database BMS_DB2;
use BMS_DB2;

-- CUSTOMER PERSONAL INFORMATION
CREATE TABLE  CUSTOMER_PERSONAL_INFO
(
	CUSTOMER_ID VARCHAR(30),
    CUSTOMER_NAME VARCHAR(30),
    DATE_OF_BIRTH DATE,
    GUARDIAN_NAME VARCHAR(30),
    CONTACT_NO BIGINT(10),
    MAIL_ID VARCHAR(30),
    GENDER CHAR(1),
    MARTIAL_STATUS VARCHAR(10),
    IDENTIFICATION_DOC_TYPE VARCHAR(20),
    ID_DOC_NO VARCHAR(20),
    CITIZENSHIP VARCHAR(10),
    CONSTRAINT CUST_PERS_INFO_PK PRIMARY KEY(CUSTOMER_ID)
    );
    
DROP TABLE CUSTOMER_PERSONAL_INFO;    

    
-- CUSTOMER REFERENCE INFO
CREATE TABLE CUSTOMER_REFERENCE_INFO
(
	CUSTOMER_ID VARCHAR(30),
    REFERENCE_ACC_NAME VARCHAR(20),
    REFERENCE_ACC_NO BIGINT(16),
    REFERENCE_ACC_ADDRESS VARCHAR(50),
    RELATION VARCHAR(25),
    CONSTRAINT CUST_REF_INFO_PK PRIMARY KEY(CUSTOMER_ID),
    CONSTRAINT CUST_REF_INFO_FK FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER_PERSONAL_INFO(CUSTOMER_ID)
    );

DROP TABLE CUSTOMER_REFERENCE_INFO;   
	
-- BANK INFO

DROP TABLE BANK_INFO;

CREATE TABLE  BANK_INFO
(
	IFSC_CODE VARCHAR(15),
    BANK_NAME VARCHAR(25),
    BRANCH_NAME VARCHAR(25),
    CONSTRAINT BANK_INFO_PK PRIMARY KEY(IFSC_CODE)
    );
    

DROP TABLE ACCOUNT_INFO;

-- ACCOUNT INFO

CREATE TABLE ACCOUNT_INFO
(
	ACCOUNT_NO BIGINT(16),
    CUSTOMER_ID VARCHAR(30),
    ACCOUNT_TYPE VARCHAR(10),
    REGISTRATION_DATE DATE,
    ACTIVATION_DATE DATE,
    IFSC_CODE VARCHAR(10),
    INTEREST DECIMAL(7,2),
    INITIAL_DEPOSIT BIGINT(10),
    CONSTRAINT ACCOUNT_INFO_PK PRIMARY KEY(ACCOUNT_NO),
    CONSTRAINT ACCOUNT_INFO_PERS_FK FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER_PERSONAL_INFO(CUSTOMER_ID),
    CONSTRAINT ACCOUNT_INFO_BANK_FK FOREIGN KEY(IFSC_CODE) REFERENCES BANK_INFO(IFSC_CODE)
    );


  
SHOW TABLES;
-- BANK INFO
INSERT INTO BANK_INFO(IFSC_CODE,BANK_NAME,BRANCH_NAME)VALUES('SBIN00649','SBI','ANANTAPUR');
INSERT INTO BANK_INFO(IFSC_CODE,BANK_NAME,BRANCH_NAME)VALUES('SBITN0123','SBI','TNAGAR');
INSERT INTO BANK_INFO(IFSC_CODE,BANK_NAME,BRANCH_NAME)VALUES('ICITNO232','ICICI','TNAGAR');
INSERT INTO BANK_INFO(IFSC_CODE,BANK_NAME,BRANCH_NAME)VALUES('SBISD0113','SBI','SAIDAPET');
INSERT INTO BANK_INFO(IFSC_CODE,BANK_NAME,BRANCH_NAME)VALUES('SHDVL0012','HDFC','VALASARAVAKKAM'),
('UTIB0043','AXIS','HENDRABARI'),
('UTIB0056','AXIS','HYDERABAD');

SELECT * FROM BANK_INFO;

-- CUSTOMER PERSONAL INFO
INSERT INTO CUSTOMER_PERSONAL_INFO(CUSTOMER_ID,CUSTOMER_NAME,DATE_OF_BIRTH,GUARDIAN_NAME,CONTACT_NO,MAIL_ID,GENDER,MARTIAL_STATUS,IDENTIFICATION_DOC_TYPE,ID_DOC_NO,CITIZENSHIP) VALUES
('20205241015','Sreenija Jallipeta','1998-09-26','J.S.Ramaiah','+19492948064','sreenija.j1998@gmail.com','F','Single','Driving License','APS012345','Resident'),
('20205000841','Sruthi Veldurti','1997-07-20','Mahesh Veldurti','+18824453621','sruthi.veldurti@gmail.com','F','Single','Driving License','APR002367','Resident'),
('20205000125','John Cussack','1964-08-20','Brendon Cussack','+16465367891','John.cussack@gmail.com','M','Married','Driving License','APT002531','Resident'),
('20205430010','Chris Lewis','1975-03-18','Chase Lewis','+1865478901','Chris.L@gmail.com','M','Married','Driving License','APY870065','Resident'),
('20205436781','Rose Bennett','1989-02-21','Tom Bennett','+19876543211','Rose.Bennett@gmail.com','F','Married','Driving License','APZ009876','Resident'),
('20205241890','Bruce Williams','1985-01-20','Asher Williams','+18761239012','Bruce.Williams@gmail.com','M','Single','Driving License','APW568890','Resident'),
('20205001000','Darcy Thompson','1987-04-04','Nick Thompson','+18903876783','Darcy.T@gmail.com','F','Single','Driving License','APD000678','Resident');


-- CUSTOMER REFERENCE INFO
INSERT INTO CUSTOMER_REFERENCE_INFO(CUSTOMER_ID,REFERENCE_ACC_NAME,REFERENCE_ACC_NO,REFERENCE_ACC_ADDRESS,RELATION) values
('20205241015','Ram sampath','890789000','3900 N Street','Brother-In-Law'),
('20205000841','Karan Veldurti','890789001','2800 S west Street','Brother'),
('20205000125','Daniel Radcliff','89078902','3600 Alma Road','Friend'),
('20205430010','Christian Lewis','89078903','2600 East Road','Brother'),
('20205436781','Serena Bennett','89078904','3400 Dream road','Sister'),
('20205241890','Elena Truce','89078905','1200 Renner road','Friend'),
('20205001000','Helen Thompson','89078906','2000 Frankford road','Mother');

/*!40014 SET FOREIGN_KEY_CHECKS=0 */;
-- ACCOUNT INFO
INSERT INTO ACCOUNT_INFO(ACCOUNT_NO,CUSTOMER_ID,ACCOUNT_TYPE,REGISTRATION_DATE,ACTIVATION_DATE,IFSC_CODE,INTEREST,INITIAL_DEPOSIT) VALUES
('1234567890','20205241015','SAVINGS','2019-08-26','2019-08-30','SBINO0649','2000.0','500'),
('1234567891','20205000841','SAVINGS','2019-09-20','2019-09-30','SBITNO123','1000.0','700'),
('1234567892','20205000125','SAVINGS','2019-10-14','2019-10-20','ICITN0232','1500.0','600'),
('1234567893','20205430010','SAVINGS','2020-01-10','2020-01-20','SBISD0113','1200.0','500'),
('1234567894','20205436781','SAVINGS','2020-02-10','2020-01-25','SHDVL0012','700.0','400'),
('1234567895','20205241890','SAVINGS','2020-03-17','2020-03-20','UTIB0043','800.0','500'),
('1234567896','20205001000','SAVINGS','2020-04-05','2020-04-15','UTIB0056','900.0','750');

SELECT * FROM ACCOUNT_INFO;

UPDATE CUSTOMER_REFERENCE_INFO 
SET REFERENCE_ACC_NAME ='RAGHU SAMPATH'
WHERE CUSTOMER_ID='20205241015';

UPDATE CUSTOMER_PERSONAL_INFO
SET IDENTIFICATION_DOC_TYPE = 'PASSPORT'
WHERE CUSTOMER_ID='20205436781';

UPDATE CUSTOMER_PERSONAL_INFO
SET ID_DOC_NO='T4141891'
WHERE CUSTOMER_ID='20205436781';

DELETE FROM CUSTOMER_REFERENCE_INFO WHERE CUSTOMER_ID = '20205241015';

ALTER TABLE BANK_INFO ADD IFSC_CODE VARCHAR(30);

ALTER TABLE ACCOUNT_INFO ADD ACCOUNT_TYPE VARCHAR(30);

ALTER TABLE CUSTOMER_PERSONAL_INFO RENAME TO CUSTOMER_PER_INFO;
-- INFORMATION IN THE TABLE IS REMOVED BUT TABLE REMAINS
TRUNCATE TABLE ACCOUNT_INFO;

REPLACE INTO CUSTOMER_PER_INFO
SET MAIL_ID='Rose.Tennett@gmail.com',
CONTACT_NO ='+19876890890',
CUSTOMER_ID='20205241015';

SELECT * FROM CUSTOMER_PER_INFO;




